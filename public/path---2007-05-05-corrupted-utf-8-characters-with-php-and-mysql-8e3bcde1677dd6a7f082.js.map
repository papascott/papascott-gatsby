{"version":3,"sources":["webpack:///path---2007-05-05-corrupted-utf-8-characters-with-php-and-mysql-8e3bcde1677dd6a7f082.js","webpack:///./.cache/json/2007-05-05-corrupted-utf-8-characters-with-php-and-mysql.json"],"names":["webpackJsonp","7868","module","exports","data","post","html","fields","title","date","url","pathContext","slug","prev","next"],"mappings":"AAAAA,cAAc,iBAERC,KACA,SAAUC,EAAQC,GCHxBD,EAAAC,SAAkBC,MAAQC,MAAQC,KAAA,i/EAA44EC,QAAsHC,MAAA,gDAAAC,KAAA,cAAAC,IAAA,oFAAsKC,aAAgBC,KAAA,6DAAAC,MAA4EN,QAAUC,MAAA,kDAAAC,KAAA,cAAAG,KAAA,iEAAsJE,MAASP,QAAUC,MAAA,GAAAC,KAAA,cAAAG,KAAA","file":"path---2007-05-05-corrupted-utf-8-characters-with-php-and-mysql-8e3bcde1677dd6a7f082.js","sourcesContent":["webpackJsonp([53177507531565],{\n\n/***/ 7868:\n/***/ (function(module, exports) {\n\n\tmodule.exports = {\"data\":{\"post\":{\"html\":\"<p>Someone recently asked me about corrupted characters in a PHP-MySQL project. They had recent stable versions of everything, MySQL 5.0 and PHP 5.1, using UTF-8 for everything, and they were getting corrupted accented characters saved in the database, junk with 'Ã's was coming out. They were asking me if there were perhaps some secret PHP setting they were missing to make things right. Not that I knew of.</p>\\n<p>I would have thought that in this day and age using UTF-8 with PHP and MySQL would just work. To try this out for myself, I downloaded some simple tutorial code, set up databases and HTML with UTF-8, and started creating records with names like Scött Hänsön and Mäcky Möüße. And sure enough, I got junk.</p>\\n<p>PHP and MySQL don't just work with UTF-8. In particular, the client connection from PHP to MySQL defaults to latin1. There don't seem to be any PHP settings to change this. On the MySQL side there are 'default-character-set' settings you can put in various sections of the my.cnf, but for me they didn't seem to help.</p>\\n<p>I found two ways to solve the problem. The first is to issue a <code>mysql_query(\\\"SET NAMES 'utf8')</code> immediately after every <code>mysql_connect</code> to manually switch the connection to utf8. That's a huge pain if you have a lot of code (even in my mini 5-file test-case I forgot one instance at first).</p>\\n<p>The other is to add a <code>init-connect='SET NAMES utf8'</code> setting to the <code>[mysqld]</code> section of my.cnf. <code>init-connect</code> automatically executes SQL commands at the beginning of every client connection. The catch is the commands won't be executed for a user with SUPER privileges, so if you're lazy and using 'root' to connect to your database, it won't work.</p>\\n<p>By using various combinations of <code>&lt;meta charset=\\\"blah\\\"/&gt;</code> in the HTML and <code>SET NAMES</code> for the database connection, you can create interesting errors. The 'Ã' errors seem to occur when correctly sent utf-8 is incorrectly saved over a latin1 connection, then read back out as utf-8. My friend said he was using <code>SET NAMES 'utf8'</code> with all his connects, I'm guessing he forgot it for INSERTs and UPDATEs. That's just a hunch.</p>\\n<p>I wasn't able to find a clear explanation of this in Google (the closest was in the comments to <a href=\\\"http://www.php.net/manual/en/function.mysql-client-encoding.php\\\">mysql&#95;client&#95;encoding()</a> in the PHP documentation), so I thought write this up here. It's clear to me, at least.</p>\",\"fields\":{\"title\":\"Corrupted UTF-8 characters with PHP and MySQL\",\"date\":\"05 May 2007\",\"url\":\"https://papascott.de/2007-05-05-corrupted-utf-8-characters-with-php-and-mysql/\"}}},\"pathContext\":{\"slug\":\"/2007-05-05-corrupted-utf-8-characters-with-php-and-mysql/\",\"prev\":{\"fields\":{\"title\":\"Top 7 Things System Administrators Forget to Do\",\"date\":\"03 May 2007\",\"slug\":\"/2007-05-03-top-7-things-system-administrators-forget-to-do/\"}},\"next\":{\"fields\":{\"title\":\"\",\"date\":\"07 May 2007\",\"slug\":\"/2007-05-07-background-on-mccafe/\"}}}}\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// path---2007-05-05-corrupted-utf-8-characters-with-php-and-mysql-8e3bcde1677dd6a7f082.js","module.exports = {\"data\":{\"post\":{\"html\":\"<p>Someone recently asked me about corrupted characters in a PHP-MySQL project. They had recent stable versions of everything, MySQL 5.0 and PHP 5.1, using UTF-8 for everything, and they were getting corrupted accented characters saved in the database, junk with 'Ã's was coming out. They were asking me if there were perhaps some secret PHP setting they were missing to make things right. Not that I knew of.</p>\\n<p>I would have thought that in this day and age using UTF-8 with PHP and MySQL would just work. To try this out for myself, I downloaded some simple tutorial code, set up databases and HTML with UTF-8, and started creating records with names like Scött Hänsön and Mäcky Möüße. And sure enough, I got junk.</p>\\n<p>PHP and MySQL don't just work with UTF-8. In particular, the client connection from PHP to MySQL defaults to latin1. There don't seem to be any PHP settings to change this. On the MySQL side there are 'default-character-set' settings you can put in various sections of the my.cnf, but for me they didn't seem to help.</p>\\n<p>I found two ways to solve the problem. The first is to issue a <code>mysql_query(\\\"SET NAMES 'utf8')</code> immediately after every <code>mysql_connect</code> to manually switch the connection to utf8. That's a huge pain if you have a lot of code (even in my mini 5-file test-case I forgot one instance at first).</p>\\n<p>The other is to add a <code>init-connect='SET NAMES utf8'</code> setting to the <code>[mysqld]</code> section of my.cnf. <code>init-connect</code> automatically executes SQL commands at the beginning of every client connection. The catch is the commands won't be executed for a user with SUPER privileges, so if you're lazy and using 'root' to connect to your database, it won't work.</p>\\n<p>By using various combinations of <code>&lt;meta charset=\\\"blah\\\"/&gt;</code> in the HTML and <code>SET NAMES</code> for the database connection, you can create interesting errors. The 'Ã' errors seem to occur when correctly sent utf-8 is incorrectly saved over a latin1 connection, then read back out as utf-8. My friend said he was using <code>SET NAMES 'utf8'</code> with all his connects, I'm guessing he forgot it for INSERTs and UPDATEs. That's just a hunch.</p>\\n<p>I wasn't able to find a clear explanation of this in Google (the closest was in the comments to <a href=\\\"http://www.php.net/manual/en/function.mysql-client-encoding.php\\\">mysql&#95;client&#95;encoding()</a> in the PHP documentation), so I thought write this up here. It's clear to me, at least.</p>\",\"fields\":{\"title\":\"Corrupted UTF-8 characters with PHP and MySQL\",\"date\":\"05 May 2007\",\"url\":\"https://papascott.de/2007-05-05-corrupted-utf-8-characters-with-php-and-mysql/\"}}},\"pathContext\":{\"slug\":\"/2007-05-05-corrupted-utf-8-characters-with-php-and-mysql/\",\"prev\":{\"fields\":{\"title\":\"Top 7 Things System Administrators Forget to Do\",\"date\":\"03 May 2007\",\"slug\":\"/2007-05-03-top-7-things-system-administrators-forget-to-do/\"}},\"next\":{\"fields\":{\"title\":\"\",\"date\":\"07 May 2007\",\"slug\":\"/2007-05-07-background-on-mccafe/\"}}}}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./~/json-loader!./.cache/json/2007-05-05-corrupted-utf-8-characters-with-php-and-mysql.json\n// module id = 7868\n// module chunks = 53177507531565"],"sourceRoot":""}